YUI.add("gallery-geo",function(C){function A(F,D,E){navigator.geolocation.getCurrentPosition(function(G){F.call(D,{success:true,coords:{latitude:G.coords.latitude,longitude:G.coords.longitude,accuracy:G.coords.accuracy,altitude:G.coords.altitude,altitudeAccuracy:G.coords.altitudeAccuracy,heading:G.coords.heading,speed:G.coords.speed},timestamp:G.timestamp,source:"native"});},function(G){if(G.code==1){F.call(D,{success:false,denied:true});}else{B(F,D);}},E);}function B(G,E,F){F=F||{};var D=C.Lang.isNumber(F.maximumAge)?{_maxage:F.maximumAge}:{};C.YQL("select * from pidgets.geoip",{on:{success:function(H){var I;if(H.error){G.call(E,{success:false});}else{I=H.query.results.Result;G.call(E,{success:true,coords:{latitude:parseFloat(I.latitude),longitude:parseFloat(I.longitude),accuracy:Infinity},timestamp:+new Date(),source:"pidgets.geoip"});}},failure:function(){G.call(E,{success:false});},timeout:function(){G.call(E,{success:false});}},timeout:F.timeout},D);}C.Geo={getCurrentPosition:navigator.geolocation?A:B};},"@VERSION@",{requires:["yql"]});