YUI.add("gallery-geo",function(C){function A(E,D){navigator.geolocation.getCurrentPosition(function(F){E.call(D,{success:true,coords:{latitude:F.coords.latitude,longitude:F.coords.longitude,accuracy:F.coords.accuracy,altitude:F.coords.altitude,altitudeAccuracy:F.coords.altitudeAccuracy,heading:F.coords.heading,speed:F.coords.speed},timestamp:F.timestamp,source:"native"});},function(F){if(F.code==1){E.call(D,{success:false,denied:true});}else{getCurrentPositionByGeoIp(E,D);}});}function B(E,D){C.YQL("select * from pidgets.geoip",{on:{success:function(F){var G;if(F.error){E.call(D,{success:false});}else{G=F.query.results.Result;E.call(D,{success:true,coords:{latitude:parseFloat(G.latitude),longitude:parseFloat(G.longitude),accuracy:Infinity},timestamp:+new Date(),source:"pidgets.geoip"});}},failure:function(){E.call(D,{success:false});}}});}C.Geo={getCurrentPosition:navigator.geolocation?A:B};},"@VERSION@",{requires:["yql"]});